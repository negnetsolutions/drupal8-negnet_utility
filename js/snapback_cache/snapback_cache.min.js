const SnapbackCache=function(o){function t(){return!!(sessionStorage&&history&&e&&window.performance)}function n(e,t){t&&s(),c.set("pageCache",e,t)}function i(e){return c.get("pageCache",e)}function r(e){n(e,null)}function a(e){if(f()){var t=i(document.location.href);const n=o.bodySelectorEl;return n.innerHTML=t.body,setTimeout(function(){window.scrollTo(t.positionX,t.positionY)},1),r(document.location.href),!1}e&&e()}var o=o||{},c={set:function(e,t,n){var o=(o=sessionStorage.getItem(e))?JSON.parse(o):{};n?o[t]=JSON.stringify(n):delete o[t],sessionStorage.setItem(e,JSON.stringify(o))},get:function(e,t,n){e=sessionStorage.getItem(e);return e&&(e=JSON.parse(e))[t]?JSON.parse(e[t]):null}},e=!0,s=function(){if(e=sessionStorage.getItem("pageCache")){var e,t=[];for(n in e=JSON.parse(e))t.push([n,e[n]]);if(10<=t.length){t.sort(function(e,t){return e=e[1].cachedAt,(t=t[1].cachedAt)<e?-1:e<t?1:0});for(var n,o=0;o<t.length+1-10;o++)delete e[n=t[o][0]];sessionStorage.setItem(namespace,JSON.stringify(e))}}},f=function(){if(!t())return!1;if(performance.navigation.type!=performance.navigation.TYPE_BACK_FORWARD)return!1;var e=i(document.location.href);return!!(e&&e.cachedAt>(new Date).getTime()-9e5)};return window.addEventListener("load",function(e){a()}),{enable:function(){e=!0},disable:function(){e=!1},remove:r,loadFromCache:a,cachePage:function(){t()&&("function"==typeof o.wait&&o.finish(),setTimeout(function(){"function"==typeof o.removeAutofocus&&o.removeAutofocus();var e={body:o.bodySelectorEl.innerHTML,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime()};n(document.location.href,e)},500))},willUseCacheOnThisPage:f}};
